<!DOCTYPE html>
<html>
<style>
table, th, td {
  border:1px solid black;
}
</style>
<body>
<div id="demo2">
<button type="button" onclick="loadGet()">Leaderboard</button>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
  lmao();
})
function loadGet() {
  var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("demo2").innerHTML =
      this.responseText;
    }
  };
  xhttp.open("GET", "http://68.183.195.190:8000/users", true);
  xhttp.send();

}
function setCookie(cname, cvalue, exdays) {
  const d = new Date();
  d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
  let expires = "expires="+d.toUTCString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
  let name = cname + "=";
  let ca = document.cookie.split(';');
  for(let i = 0; i < ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
function loginScript(username) {
  var xhttp = new XMLHttpRequest();
  xhttp.open("POST", "http://68.183.195.190:8000/login", true);
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
		if (this.responseText == 512)
		{
			setCookie("username", "", 1) 
		}
    }
  };
  xhttp.setRequestHeader('Content-Type', 'application/json');
xhttp.send(JSON.stringify({
    user: username,

}));
  };
function lmao()
{
	if (getCookie("username") != "")
	{
		loginScript(username)
		if (getCookie("username") != "")
		{
			document.getElementById("loggedin").innerHTML ="Logged in as " + getCookie("username");
		}
		else
		{
			document.getElementById("loggedin").innerHTML =" You are not logged in";
		}
	}
	else
	{
		document.getElementById("loggedin").innerHTML =" You are not logged in";
	}
}
</script>
<h2>Scoreboard</h2>

<table style="width:100%">
  <tr>
    <th>Name</th>
    <th>Points</th>
  </tr>
  <tr>
    <td>Test1</td>
    <td>100</td>
  </tr>
  <tr>
    <td>Test2</td>
    <td>10</td>
  </tr>
</table>
<a href="http://68.183.195.190/point1.html">Point 1</a>
<a href="http://68.183.195.190/login.html">Log In</a>
<a href="http://68.183.195.190/register">Register</a>
</script>
<div id="loggedin">
</div>

</body>
</html>
